{% extends 'base.html' %}
{% block content %}

<h1>Products Details</h1>


  <div class="col s6">
    <div class="card">
      <div class="card-content">
        <span class="card-title">{{ product.name }}</span>
        <p>Category: {{ product.category }}</p>
        <p>Description: {{ cat.description }}</p>
       
      </div>
      <div class="card-action">
        <a href="{% url 'products_update' product.id %}">Edit</a>
        <a href="{% url 'products_delete' product.id %}">Delete</a>
      </div>
    </div>
    <div>
      {% for photo in product.photo_set.all %}
        <img class="responsive-img card-panel" src="{{photo.url}}">
      {% empty %}
        <div class="card-panel teal-text center-align">No Photos Uploaded</div>
      {% endfor %}
      <form action="{% url 'add_photo' product.id %}" enctype="multipart/form-data" method="POST" class="card-panel">
        {% csrf_token %}
        <input type="file" name="photo-file">
        <br><br>
        <input type="submit" class="btn" value="Upload Photo">
    </form>
    </div>
   
 </div>

<hr>
<div class="row">
  <div class="col s6">
    <h3>{{ product.name }}'s Stores</h3>
    {% if product.stores.count %}
      {% for store in product.stores.all %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">
               <span style="color: {{ toy.color }}">{{ store.name }}</span> {{ store.postcode}}
            </span>
          </div>
          <div class="card-action">
            <form action="{% url 'unassoc_store' product.id store.id %}" method="post">
                {% csrf_token %}
              <button type="submit" class="btn">Remove</button>
            </form>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <h5>No Stores :(</h5>
    {% endif %}
  </div>

  <div class="col s6">
    <h3>Available Stores</h3>
    {% if stores.count %}
      {% for store in stores.all %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">
               <span >{{ store.name }}</span> 
            </span>
          </div>
          <div class="card-action">
            <form action="{% url 'assoc_store' product.id store.id %}" method="post">
                {% csrf_token %}
              <button type="submit" class="btn">Add</button>
            </form>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <h5>{{product.name}} Already Has All Stores Available</h5>
    {% endif %}
  </div>
</div>


<!-- JS to create a date picker and init the meal dropdown -->
<script>
  // create a datepicker
 
</script>
{% endblock %}